(function(){var c=function(v,w){if(!w){w=document;}return w.querySelector(v);};var i=function(v,w){if(!w){w=document;}return Array.prototype.slice.call(w.querySelectorAll(v));
};var r=function(v){return v.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");};var a=function(w,v){return r(w.className).indexOf(v)>-1;};var j=function(w,v){if(!v){return;
}if(w.classList){w.classList.add(v);return;}if(a(w,v)){return;}w.className=r(w.className+" "+v);};var l=function(w,v){if(!v){return;}if(w.classList){w.classList.remove(v);
return;}w.className=w.className.replace(new RegExp("(^|\\s)"+v+"(?:\\s|$)"),"$1");};var q=(function(){var v=function(A,z,y){for(var x=0,w=A.length;x<w;
x++){q(A[x],z,y);}};if(document.addEventListener){return function(y,x,w){if(y&&y.nodeName||y===window){y.addEventListener(x,w,false);}else{if(y&&y.length){v(y,x,w);
}}};}return function(y,x,w){if(y&&y.nodeName||y===window){y.attachEvent("on"+x,function(){return w.call(y,window.event);});}else{if(y&&y.length){v(y,x,w);
}}};})();var s=function(w,v){this.bindFunction=function(z,y){return function(){return z.apply(y,[y]);};};this.stateChange=function(y){if(this.request.readyState==4){this.callbackFunction(this.request);
}};this.getRequest=function(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}else{if(window.XMLHttpRequest){return new XMLHttpRequest;
}}return false;};this.postBody=arguments[2]||"";this.callbackFunction=v;this.url=w;this.request=this.getRequest();if(this.request){var x=this.request;x.onreadystatechange=this.bindFunction(this.stateChange,this);
if(this.postBody!==""){x.open("POST",w,true);x.setRequestHeader("X-Requested-With","XMLHttpRequest");x.setRequestHeader("Content-type","application/x-www-form-urlencoded");
x.setRequestHeader("Connection","close");}else{x.open("GET",w,true);}x.send(this.postBody);}};var h=window.history&&typeof history.pushState!=="undefined";
var o=c("#img .img")!==null?c("#img .img").src:"",k="",f="",u=document.createElement("div"),e=function(){s(c("a.reader-choice.sad").href+"?isajax=1",function(v){if(v.status==200){f=u.innerHTML=v.responseText;
k=c("#img .img",u)!==null?c("#img .img",u).src:"";}});},n=function(x,w){var v=c("#img");o=c(".img",v)!==null?c(".img",v).src:"";l(c(".choices"),"hidden");
j(c(".share"),"hidden");v.innerHTML="";j(v,"loading");if(k!==""&&k!==o){l(v,"loading");c("#content").innerHTML=f;_gaq.push(["_trackEvent","choix","triste",c("#img .img").src]);
e();}else{s(w+"?isajax=1",function(y){l(v,"loading");if(y.status==200){c("#content").innerHTML=y.responseText;_gaq.push(["_trackEvent","choix","triste",c("#img .img").src]);
}e();});}if(h){history.pushState({content:c("#content").innerHTML,url:w},document.title,w);}if(x.preventDefault){x.preventDefault();}else{x.returnValue=false;
}},p=function(w,v){j(c(".choices"),"hidden");l(c(".share"),"hidden");if(w.preventDefault){w.preventDefault();}else{w.returnValue=false;}if(h){history.pushState({content:c("#content").innerHTML,url:v},document.title,v);
}},g=[38,38,40,40,37,39,37,39,66,65],t=[],m=function(v){var w=document.createElement("textarea");w.innerHTML=v;return w.value;},b=function(){if(confirm(m("B&#79;&#85;M &#33; Tu&#32;v&#97;&#115;&#32;&#234;&#116;&#114;&#101; &#114;ed&#105;&#114;&#105;&#103;&#233; &#118;&#101;rs&#32;&#108;e&#32;&#115;&#105;&#116;e de l&#39;au&#116;&#101;&#117;r d&#101;&#32;c&#101;&#32;&#115;&#105;&#116;&#101; s&#117;&#98;l&#105;me&#46;"))){window.location.href=m("&#104;t&#116;&#112;&#58;&#47;&#47;&#101;mm&#97;nue&#108;&#112;e&#108;l&#101;tier&#46;c&#111;&#109;");
_gaq.push(["_trackEvent","secret","valider"]);}else{_gaq.push(["_trackEvent","secret","annuler"]);}};setTimeout(function(){e();},100);q(c("#content"),"click",function(w){var v=w.target||w.srcElement;
if(v&&v.nodeName==="A"&&a(v,"reader-choice")&&a(v,"sad")){n(w,v.href);}if(v&&v.nodeName==="A"&&a(v,"reader-choice")&&a(v,"happy")){_gaq.push(["_trackEvent","choix","content"]);
p(w,v.href);}if(v&&v.nodeName==="A"&&a(v,"toggle-view")){window.history.go(-1);if(event.preventDefault){event.preventDefault();}else{event.returnValue=false;
}}if(v&&v.nodeName==="A"&&a(v,"share-link")&&a(v,"twitter")){_gaq.push(["_trackEvent","partage","twitter"]);}});var d=c("#content").innerHTML;q(window,"popstate",function(w){var v=(w.state&&w.state.content)?w.state.content:d;
c("#content").innerHTML=v;});q(document,"keydown",function(v){if(t.length>=g.length){t.shift();}t.push(v.keyCode);if(t.toString()==g.toString()){b();}});
q(c("#content"),"keydown",function(w){var v=w.target||w.srcElement;if(v&&v.nodeName==="TEXTAREA"&&a(v,"share-text")){c(".share-link.twitter").href="https://twitter.com/intent/tweet?text="+encodeURIComponent(v.value);
}});})();