(function(){var c=function(w,x){if(!x){x=document;}return x.querySelector(w);};var j=function(w,x){if(!x){x=document;}return Array.prototype.slice.call(x.querySelectorAll(w));
};var s=function(w){return w.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");};var a=function(x,w){return s(x.className).indexOf(w)>-1;};var k=function(x,w){if(!w){return;
}if(x.classList){x.classList.add(w);return;}if(a(x,w)){return;}x.className=s(x.className+" "+w);};var l=function(x,w){if(!w){return;}if(x.classList){x.classList.remove(w);
return;}x.className=x.className.replace(new RegExp("(^|\\s)"+w+"(?:\\s|$)"),"$1");};var g=function(w){if(w.preventDefault){w.preventDefault();}else{w.returnValue=false;
}};var r=(function(){var w=function(B,A,z){for(var y=0,x=B.length;y<x;y++){r(B[y],A,z);}};if(document.addEventListener){return function(z,y,x){if(z&&z.nodeName||z===window){z.addEventListener(y,x,false);
}else{if(z&&z.length){w(z,y,x);}}};}return function(z,y,x){if(z&&z.nodeName||z===window){z.attachEvent("on"+y,function(){return x.call(z,window.event);
});}else{if(z&&z.length){w(z,y,x);}}};})();var t=function(x,w){this.bindFunction=function(A,z){return function(){return A.apply(z,[z]);};};this.stateChange=function(z){if(this.request.readyState==4){this.callbackFunction(this.request);
}};this.getRequest=function(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}else{if(window.XMLHttpRequest){return new XMLHttpRequest;
}}return false;};this.postBody=arguments[2]||"";this.callbackFunction=w;this.url=x;this.request=this.getRequest();if(this.request){var y=this.request;y.onreadystatechange=this.bindFunction(this.stateChange,this);
if(this.postBody!==""){y.open("POST",x,true);y.setRequestHeader("X-Requested-With","XMLHttpRequest");y.setRequestHeader("Content-type","application/x-www-form-urlencoded");
y.setRequestHeader("Connection","close");}else{y.open("GET",x,true);}y.send(this.postBody);}};var i=window.history&&typeof history.pushState!=="undefined";
var o=c("#item").getAttribute("data-hash")!==null?c("#item").getAttribute("data-hash"):"",n="",e="",v=document.createElement("div"),p=function(){t(c("a.reader-choice.sad").href+"?isajax=1",function(w){if(w.status==200){e=v.innerHTML=w.responseText;
n=c("#item[data-hash]",v)!==null?c("#item[data-hash]",v).getAttribute("data-hash"):"";}});},h=function(y,w){var x=c("#item");o=x.getAttribute("data-hash")!==null?x.getAttribute("data-hash"):"";
x.innerHTML="";k(x,"loading");if(n!==""&&n!==o){l(x,"loading");c("#content").innerHTML=e;_gaq.push(["_trackEvent","choix","triste",c("#item .for-analytics").innerHTML]);
p();}else{t(w+"?isajax=1",function(z){l(x,"loading");if(z.status==200){c("#content").innerHTML=z.responseText;_gaq.push(["_trackEvent","choix","triste",c("#item .for-analytics").innerHTML]);
}p();});}if(i){history.pushState({content:c("#content").innerHTML,url:w},document.title,w);}g(y);},q=function(x,w){t(w+"?isajax=1",function(y){if(y.status==200){c("#content").innerHTML=y.responseText;
if(i){history.pushState({content:c("#content").innerHTML,url:w},document.title,w);}}});g(x);},f=[38,38,40,40,37,39,37,39,66,65],u=[],m=function(w){var x=document.createElement("textarea");
x.innerHTML=w;return x.value;},b=function(){if(confirm(m("B&#79;&#85;M &#33; Tu&#32;v&#97;&#115;&#32;&#234;&#116;&#114;&#101; &#114;ed&#105;&#114;&#105;&#103;&#233; &#118;&#101;rs&#32;&#108;e&#32;&#115;&#105;&#116;e de l&#39;au&#116;&#101;&#117;r d&#101;&#32;c&#101;&#32;&#115;&#105;&#116;&#101; s&#117;&#98;l&#105;me&#46;"))){window.location.href=m("&#104;t&#116;&#112;&#58;&#47;&#47;&#101;mm&#97;nue&#108;&#112;e&#108;l&#101;tier&#46;c&#111;&#109;");
_gaq.push(["_trackEvent","secret","valider"]);}else{_gaq.push(["_trackEvent","secret","annuler"]);}};setTimeout(function(){p();},100);r(c("#content"),"click",function(x){var w=x.target||x.srcElement;
if(w&&w.nodeName==="A"&&a(w,"reader-choice")&&a(w,"sad")){h(x,w.href);}if(w&&w.nodeName==="A"&&a(w,"reader-choice")&&a(w,"happy")){_gaq.push(["_trackEvent","choix","content"]);
q(x,w.href);}if(w&&w.nodeName==="A"&&a(w,"toggle-view")){window.history.go(-1);g(event);}if(w&&w.nodeName==="A"&&a(w,"share-link")&&a(w,"twitter")){_gaq.push(["_trackEvent","partage","twitter"]);
}});var d=c("#content").innerHTML;r(window,"popstate",function(x){var w=(x.state&&x.state.content)?x.state.content:d;c("#content").innerHTML=w;});r(document,"keydown",function(w){if(u.length>=f.length){u.shift();
}u.push(w.keyCode);if(u.toString()==f.toString()){b();}});r(c("#content"),"keydown",function(x){var w=x.target||x.srcElement;if(w&&w.nodeName==="TEXTAREA"&&a(w,"share-text")){c(".share-link.twitter").href="https://twitter.com/intent/tweet?text="+encodeURIComponent(w.value);
}});})();