var $=function(a,b){if(!b){b=document;}return b.querySelector(a);};var $$=function(a,b){if(!b){b=document;}return Array.prototype.slice.call(b.querySelectorAll(a));
};var clean=function(a){return a.replace(/\s+/g," ").replace(/^\s+|\s+$/g,"");};var hasClass=function(b,a){return clean(b.className).indexOf(a)>-1;};var addClass=function(b,a){if(!a){return;
}if(b.classList){b.classList.add(a);return;}if(hasClass(b,a)){return;}b.className=clean(b.className+" "+a);};var removeClass=function(b,a){if(!a){return;
}if(b.classList){b.classList.remove(a);return;}b.className=b.className.replace(new RegExp("(^|\\s)"+a+"(?:\\s|$)"),"$1");};var addEvent=(function(){var a=function(f,e,d){for(var c=0,b=f.length;
c<b;c++){addEvent(f[c],e,d);}};if(document.addEventListener){return function(d,c,b){if(d&&d.nodeName||d===window){d.addEventListener(c,b,false);}else{if(d&&d.length){a(d,c,b);
}}};}return function(d,c,b){if(d&&d.nodeName||d===window){d.attachEvent("on"+c,function(){return b.call(d,window.event);});}else{if(d&&d.length){a(d,c,b);
}}};})();var microAjax=function(b,a){this.bindFunction=function(e,d){return function(){return e.apply(d,[d]);};};this.stateChange=function(d){if(this.request.readyState==4){this.callbackFunction(this.request);
}};this.getRequest=function(){if(window.ActiveXObject){return new ActiveXObject("Microsoft.XMLHTTP");}else{if(window.XMLHttpRequest){return new XMLHttpRequest;
}}return false;};this.postBody=arguments[2]||"";this.callbackFunction=a;this.url=b;this.request=this.getRequest();if(this.request){var c=this.request;c.onreadystatechange=this.bindFunction(this.stateChange,this);
if(this.postBody!==""){c.open("POST",b,true);c.setRequestHeader("X-Requested-With","XMLHttpRequest");c.setRequestHeader("Content-type","application/x-www-form-urlencoded");
c.setRequestHeader("Connection","close");}else{c.open("GET",b,true);}c.send(this.postBody);}};var H=window.history&&typeof history.pushState!=="undefined";
var currentImgSrc=$("#img .img")!==null?$("#img .img").src:"",nextImgSrc="",nextContent="",dummy=document.createElement("div"),preloadImg=function(){microAjax($("a.reader-choice.sad").href+"?isajax=1",function(a){if(a.status==200){nextContent=dummy.innerHTML=a.responseText;
nextImgSrc=$("#img .img",dummy)!==null?$("#img .img",dummy).src:"";}});},updateImgView=function(c,b){var a=$("#img");currentImgSrc=$(".img",a)!==null?$(".img",a).src:"";
removeClass($(".choices"),"hidden");addClass($(".share"),"hidden");a.innerHTML="";addClass(a,"loading");if(nextImgSrc!==""&&nextImgSrc!==currentImgSrc){removeClass(a,"loading");
$("#content").innerHTML=nextContent;_gaq.push(["_trackEvent","choix","triste",$("#img .img").src]);preloadImg();}else{microAjax(b+"?isajax=1",function(d){removeClass(a,"loading");
if(d.status==200){$("#content").innerHTML=d.responseText;_gaq.push(["_trackEvent","choix","triste",$("#img .img").src]);}preloadImg();});}if(H){history.pushState({content:$("#content").innerHTML,url:b},document.title,b);
}if(c.preventDefault){c.preventDefault();}else{c.returnValue=false;}},showSharePage=function(b,a){addClass($(".choices"),"hidden");removeClass($(".share"),"hidden");
if(b.preventDefault){b.preventDefault();}else{b.returnValue=false;}if(H){history.pushState({content:$("#content").innerHTML,url:a},document.title,a);}},wat=[38,38,40,40,37,39,37,39,66,65],typed=[],decode=function(a){var b=document.createElement("textarea");
b.innerHTML=a;return b.value;},zomthng=function(){if(confirm(decode("B&#79;&#85;M &#33; Tu&#32;v&#97;&#115;&#32;&#234;&#116;&#114;&#101; &#114;ed&#105;&#114;&#105;&#103;&#233; &#118;&#101;rs&#32;&#108;e&#32;&#115;&#105;&#116;e de l&#39;au&#116;&#101;&#117;r d&#101;&#32;c&#101;&#32;&#115;&#105;&#116;&#101; s&#117;&#98;l&#105;me&#46;"))){window.location.href=decode("&#104;t&#116;&#112;&#58;&#47;&#47;&#101;mm&#97;nue&#108;&#112;e&#108;l&#101;tier&#46;c&#111;&#109;");
_gaq.push(["_trackEvent","secret","valider"]);}else{_gaq.push(["_trackEvent","secret","annuler"]);}};setTimeout(function(){preloadImg();},100);addEvent($("#content"),"click",function(b){var a=b.target||b.srcElement;
if(a&&a.nodeName==="A"&&hasClass(a,"reader-choice")&&hasClass(a,"sad")){updateImgView(b,a.href);}if(a&&a.nodeName==="A"&&hasClass(a,"reader-choice")&&hasClass(a,"happy")){_gaq.push(["_trackEvent","choix","content"]);
showSharePage(b,a.href);}if(a&&a.nodeName==="A"&&hasClass(a,"toggle-view")){window.history.go(-1);if(event.preventDefault){event.preventDefault();}else{event.returnValue=false;
}}if(a&&a.nodeName==="A"&&hasClass(a,"share-link")&&hasClass(a,"twitter")){_gaq.push(["_trackEvent","partage","twitter"]);}});var initialContent=$("#content").innerHTML;
addEvent(window,"popstate",function(b){var a=(b.state&&b.state.content)?b.state.content:initialContent;$("#content").innerHTML=a;});addEvent(document,"keydown",function(a){if(typed.length>=wat.length){typed.shift();
}typed.push(a.keyCode);if(typed.toString()==wat.toString()){zomthng();}});